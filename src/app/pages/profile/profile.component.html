<!-- profile.component.html -->
<div class="profile-container">
  <mat-sidenav-container class="sidenav-container">
    <!-- Side Navigation -->
    <mat-sidenav #sidenav mode="side" opened class="sidenav">
      <div class="user-summary">
        <mat-icon class="avatar-icon">account_circle</mat-icon>
        <h2>{{ user?.displayName || 'Felhasználó' }}</h2>
        <p class="email">{{ user?.email }}</p>
        <p class="member-since">Tagság kezdete: {{ user?.metadata?.creationTime | date }}</p>
      </div>

      <mat-nav-list>
        <a mat-list-item routerLink="/profile" routerLinkActive="active-link">
          <mat-icon>person</mat-icon>
          <span>Profil</span>
        </a>
        <a mat-list-item routerLink="/orders">
          <mat-icon>shopping_cart</mat-icon>
          <span>Rendelések</span>
        </a>
        <a mat-list-item routerLink="/addresses">
          <mat-icon>location_on</mat-icon>
          <span>Címek</span>
        </a>
        <a mat-list-item routerLink="/security">
          <mat-icon>lock</mat-icon>
          <span>Biztonság</span>
        </a>
        <a mat-list-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Kijelentkezés</span>
        </a>
      </mat-nav-list>
    </mat-sidenav>

    <!-- Main Content -->
    <mat-sidenav-content class="content">
      <div class="header">
        <h1>Profil adatok</h1>
        <button mat-raised-button color="primary" (click)="openEditDialog()">
          <mat-icon>edit</mat-icon>
          Szerkesztés
        </button>
      </div>

      <mat-card class="section-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>badge</mat-icon>
          <mat-card-title>Személyes adatok</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list>
            <mat-list-item>
              <h3 matLine>Teljes név</h3>
              <p matLine>{{ user?.displayName || 'Nincs megadva' }}</p>
            </mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item>
              <h3 matLine>Email cím</h3>
              <p matLine>
                {{ user?.email }}
                <mat-icon class="verified-icon" *ngIf="user?.emailVerified">check_circle</mat-icon>
              </p>
            </mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item>
              <h3 matLine>Telefonszám</h3>
              <p matLine>{{ user?.phoneNumber || 'Nincs megadva' }}</p>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>

      <mat-card class="section-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>home</mat-icon>
          <mat-card-title>Alapértelmezett cím</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div *ngIf="defaultAddress; else noAddress">
           
          </div>
          <ng-template #noAddress>
            <p>Nincs mentett cím</p>
          </ng-template>
        </mat-card-content>
      </mat-card>

      <mat-card class="section-card">
        <mat-card-header>
          <mat-icon mat-card-avatar>security</mat-icon>
          <mat-card-title>Biztonság</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="security-actions">
            <button mat-raised-button (click)="changePassword()">
              <mat-icon>key</mat-icon>
              Jelszó változtatása
            </button>
            <button mat-raised-button color="warn" (click)="openDeleteDialog()">
              <mat-icon>delete</mat-icon>
              Fiók törlése
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>